{"version":3,"sources":["webpack://@clarkwinkelmann/featured-discussions/webpack/bootstrap","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['forum/app']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/components/Button']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/extend']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/components/Badge']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/components/LinkButton']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/models/Discussion']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/components/Page']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/helpers/listItems']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['common/components/Modal']\"","webpack://@clarkwinkelmann/featured-discussions/external \"flarum.core.compat['forum/components/EventPost']\"","webpack://@clarkwinkelmann/featured-discussions/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@clarkwinkelmann/featured-discussions/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@clarkwinkelmann/featured-discussions/./src/forum/components/SchedulePage.ts","webpack://@clarkwinkelmann/featured-discussions/./src/forum/components/FeatureModal.ts","webpack://@clarkwinkelmann/featured-discussions/./src/forum/components/FeaturedPost.ts","webpack://@clarkwinkelmann/featured-discussions/./src/forum/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","isLink","event","dataTransfer","types","includes","ondragover","preventDefault","stopPropagation","dropEffect","redraw","this","classList","add","SchedulePage","oninit","vnode","app","store","find","filter","featureScheduled","page","limit","then","view","schedule","forum","attribute","forEach","date","push","custom","dayjs","discussions","all","discussion","discussionDate","some","isSame","isAfter","splice","listItems","IndexPage","sidebarItems","toArray","translator","trans","map","format","fromNow","ondragenter","ondragleave","remove","ondrop","slug","url","getData","matches","RegExp","route","id","replace","exec","dragDiscussionSlug","showError","setTimeout","getBy","saveAttributes","featuredFrom","toISOString","save","bySlug","include","error","length","draggable","ondragstart","position","getBoundingClientRect","effectAllowed","setData","setDragImage","pageX","left","window","scrollX","pageY","top","scrollY","DiscussionListItem","component","params","Page","FeatureModal","attrs","from","until","className","title","content","type","checked","onchange","$","focus","target","disabled","Button","onclick","modal","close","onsubmit","loading","featuredUntil","loaded","Modal","formatDate","FeaturedPost","icon","descriptionKey","post","descriptionData","EventPost","initializers","routes","featureSchedule","path","postComponents","extend","DiscussionControls","items","show","Discussion","badges","Badge","label","LinkButton","href"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/components/Badge'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/models/Discussion'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['forum/components/DiscussionListItem'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['forum/components/EventPost'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import {Vnode} from 'mithril';\nimport {Dayjs} from 'dayjs';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport listItems from 'flarum/common/helpers/listItems';\nimport Discussion from 'flarum/common/models/Discussion';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\n\nfunction dragDiscussionSlug(event: DragEvent): string | null {\n    if (!event.dataTransfer) {\n        return null;\n    }\n\n    let url = event.dataTransfer.getData('URL');\n\n    if (!url) {\n        url = event.dataTransfer.getData('text/plain');\n    }\n\n    // We won't match the URL from the start because there will be both path-only and fully qualified URLs\n    const regex = new RegExp(app.route('discussion', {\n        id: '==id==',\n    }).replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&').replace('==id==', '([^/]+)') + '(/[0-9]+)?$');\n\n    const matches = regex.exec(url);\n\n    if (!matches) {\n        return null;\n    }\n\n    return matches[1];\n}\n\n// We don't check whether the link is to a discussion here because it's not available until the user drops it when\n// coming from a different window\n// text/uri-list is the official type that handles most drags inside the tab or cross browser tabs\n// text/x-moz-url is necessary to receive drops from Firefox address bar, or in Firefox from cross browser\nfunction isLink(event: DragEvent): boolean {\n    if (!event.dataTransfer) {\n        return false;\n    }\n\n    return event.dataTransfer.types.includes('text/uri-list') ||\n        event.dataTransfer.types.includes('text/x-moz-url');\n}\n\nfunction ondragover(this: HTMLElement, event: DragEvent) {\n    if (!event.dataTransfer) {\n        return;\n    }\n\n    if (!isLink(event)) {\n        return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n    event.dataTransfer.dropEffect = 'move';\n    // @ts-ignore Mithril event redraw\n    event.redraw = false;\n\n    this.classList.add('valid-drop');\n}\n\nexport default class SchedulePage extends Page {\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        app.store.find('discussions', {\n            filter: {\n                featureScheduled: 1,\n            },\n            page: {\n                limit: 50,\n            },\n        }).then(() => {\n            // We don't store the discussions here, we will read them from the store\n            m.redraw();\n        });\n    }\n\n    view() {\n        const schedule: {\n            custom: boolean\n            date: Dayjs\n            discussions: Discussion[]\n        }[] = [];\n\n        const dates: string[] = app.forum.attribute('featureDiscussionsSchedule') || [];\n\n        dates.forEach(date => {\n            schedule.push({\n                custom: false,\n                date: dayjs(date),\n                discussions: [],\n            });\n        });\n\n        // Retrieving discussions from the store is the easiest, that way we don't need to worry about removing featured discussions\n        // that were un-featured from the modal, and we don't need to explicitly add new discussions retrieved async after a drag and drop\n        app.store.all('discussions').forEach((discussion: Discussion) => {\n            const from = discussion.attribute('featuredFrom');\n\n            if (!from) {\n                return;\n            }\n\n            const discussionDate: any = dayjs(discussion.attribute('featuredFrom'));\n\n            schedule.some((s, i) => {\n                if (s.date.isSame(discussionDate)) {\n                    s.discussions.push(discussion);\n\n                    return true;\n                }\n\n                if (i > 0 && s.date.isAfter(discussionDate)) {\n                    schedule.splice(i - 1, 0, {\n                        custom: true,\n                        date: discussionDate,\n                        discussions: [\n                            discussion,\n                        ],\n                    });\n\n                    return true;\n                }\n\n                return false;\n            });\n        });\n\n        return m('.container', m('.sideNavContainer', [\n            m('nav.IndexPage-nav.sideNav', m('ul', listItems(IndexPage.prototype.sidebarItems().toArray()))),\n            m('.sideNavOffset', [\n                m('p', app.translator.trans('clarkwinkelmann-featured-discussions.forum.schedule.help')),\n                m('.FeaturedScheduleList', schedule.map(s => m('.FeaturedScheduleSlot', [\n                    m('.FeaturedScheduleDate', [\n                        s.custom ? [\n                            m('span.FeaturedScheduleCustom', '[' + app.translator.trans('clarkwinkelmann-featured-discussions.forum.schedule.custom') + ']'),\n                            ' ',\n                        ] : null,\n                        s.date.format('YYYY-MM-DD HH:mm:ss') + ' ',\n                        m('em', '(' + s.date.fromNow() + ')'),\n                    ]),\n                    m('.FeaturedScheduleDrop', {\n                        ondragover,\n                        ondragenter: ondragover,\n                        ondragleave(this: HTMLElement) {\n                            this.classList.remove('valid-drop');\n                        },\n                        ondrop(this: HTMLElement, event: DragEvent) {\n                            if (!event.dataTransfer) {\n                                return;\n                            }\n\n                            if (!isLink(event)) {\n                                return;\n                            }\n\n                            const slug = dragDiscussionSlug(event);\n\n                            event.preventDefault();\n                            event.stopPropagation();\n\n                            this.classList.remove('valid-drop');\n\n                            const showError = () => {\n                                this.classList.add('invalid-drop');\n\n                                setTimeout(() => {\n                                    this.classList.remove('invalid-drop');\n                                }, 2000);\n                            };\n\n                            // If the link is invalid, we still prevent the drop because otherwise it would be confusing\n                            // to show active drop and then let the browser load the link\n                            if (!slug) {\n                                showError();\n\n                                return;\n                            }\n\n                            const discussion: Discussion = app.store.getBy('discussions', 'slug', slug);\n\n                            const saveAttributes = {\n                                featuredFrom: s.date.toISOString(),\n                            };\n\n                            if (discussion) {\n                                discussion.save(saveAttributes).then(() => {\n                                    m.redraw();\n                                });\n                            } else {\n                                // If the discussion was dropped from another window, we need to retrieve it from the store\n                                app.store.find('discussions', slug, {\n                                    bySlug: true,\n                                    // Similar includes as the discussion list, that way the template should be mostly OK\n                                    // If extensions customize the includes on homepage it unfortunately won't reflect here\n                                    // this means tags aren't loaded at the moment, and mostRelevantPost isn't available\n                                    include: 'user,lastPostedUser',\n                                }).then((discussion: Discussion) => {\n                                    discussion.save(saveAttributes).then(() => {\n                                        m.redraw();\n                                    });\n                                }).catch(error => {\n                                    showError();\n\n                                    throw error;\n                                });\n                            }\n                        },\n                    }, [\n                        m('.FeaturedScheduleDropHere', app.translator.trans('clarkwinkelmann-featured-discussions.forum.schedule.drop-here')),\n                        m('.FeaturedScheduleDropError', app.translator.trans('clarkwinkelmann-featured-discussions.forum.schedule.drop-error')),\n                        s.discussions.length === 0 ? m('.FeaturedScheduleDropEmpty', app.translator.trans('clarkwinkelmann-featured-discussions.forum.schedule.empty')) : null,\n                        s.discussions.map(discussion => m('.FeaturedScheduleDiscussion', {\n                            draggable: true,\n                            ondragstart(this: HTMLElement, event: DragEvent) {\n                                if (!event.dataTransfer) {\n                                    return;\n                                }\n\n                                const position = this.getBoundingClientRect();\n\n                                const url = app.forum.attribute('baseUrl') + app.route.discussion(discussion);\n\n                                event.dataTransfer.effectAllowed = 'move';\n                                event.dataTransfer.setData('text/uri-list', url);\n                                event.dataTransfer.setData('text/plain', url);\n                                event.dataTransfer.setDragImage(this, event.pageX - position.left - window.scrollX, event.pageY - position.top - window.scrollY);\n                            },\n                        }, DiscussionListItem.component({\n                            discussion,\n                            params: {},\n                        }))),\n                    ]),\n                ]))),\n            ]),\n        ]));\n    }\n}\n","import {Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Discussion from 'flarum/common/models/Discussion';\n\ninterface FeatureModalAttrs {\n    discussion: Discussion\n}\n\n// @ts-ignore TODO missing Modal.view typings\nexport default class FeatureModal extends Modal {\n    attrs!: FeatureModalAttrs\n\n    from: string | null = null\n    until: string | null = null\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.from = this.attrs.discussion.attribute('featuredFrom') || null;\n        this.until = this.attrs.discussion.attribute('featuredUntilEdit') || null;\n    }\n\n    className() {\n        return 'FeatureModal';\n    }\n\n    title() {\n        return app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.title');\n    }\n\n    content() {\n        return m('.Modal-body', [\n            m('.Form-group', [\n                m('label', app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.fields.from')),\n                m('label', [\n                    m('input', {\n                        type: 'radio',\n                        name: 'featuredFrom',\n                        value: 'off',\n                        checked: this.from === null,\n                        onchange: () => {\n                            this.from = null;\n                            this.until = null;\n                        },\n                    }),\n                    ' ',\n                    app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.from.not'),\n                ]),\n                m('label', [\n                    m('input', {\n                        type: 'radio',\n                        name: 'featuredFrom',\n                        value: 'next',\n                        checked: this.from === 'next',\n                        onchange: () => {\n                            this.from = 'next';\n                        },\n                    }),\n                    ' ',\n                    app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.from.next'),\n                ]),\n                m('label', [\n                    m('input', {\n                        type: 'radio',\n                        name: 'featuredFrom',\n                        value: 'manual',\n                        checked: this.from !== null && this.from !== 'next',\n                        onchange: () => {\n                            this.from = '';\n\n                            setTimeout(() => {\n                                this.$('input.js-featured-from').focus();\n                            }, 0);\n                        },\n                    }),\n                    ' ',\n                    app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.from.manual'),\n                    m('input.FormControl.js-featured-from', {\n                        type: 'text',\n                        value: this.from !== 'next' ? this.from : '',\n                        onchange: (event: Event) => {\n                            this.from = (event.target as HTMLInputElement).value;\n                        },\n                        disabled: this.from === null || this.from === 'next',\n                    }),\n                ]),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.fields.until')),\n                m('label', [\n                    m('input', {\n                        type: 'radio',\n                        name: 'featuredUntil',\n                        value: 'auto',\n                        checked: this.until === null,\n                        onchange: () => {\n                            this.until = null;\n                        },\n                    }),\n                    ' ',\n                    app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.until.auto'),\n                ]),\n                m('label', [\n                    m('input', {\n                        type: 'radio',\n                        name: 'featuredUntil',\n                        value: 'manual',\n                        checked: this.until !== null,\n                        onchange: () => {\n                            this.until = '';\n\n                            setTimeout(() => {\n                                this.$('input.js-featured-until').focus();\n                            }, 0);\n                        },\n                    }),\n                    ' ',\n                    app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.until.manual'),\n                    m('input.FormControl.js-featured-until', {\n                        type: 'text',\n                        value: this.until,\n                        onchange: (event: Event) => {\n                            this.until = (event.target as HTMLInputElement).value;\n                        },\n                        disabled: this.until === null,\n                    }),\n                ]),\n            ]),\n            m('.Form-group', [\n                Button.component({\n                    className: 'Button',\n                    onclick() {\n                        app.modal.close();\n                    },\n                }, app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.action.cancel')),\n                ' ',\n                Button.component({\n                    type: 'submit',\n                    className: 'Button Button--primary',\n                }, app.translator.trans('clarkwinkelmann-featured-discussions.forum.modal.action.submit')),\n            ]),\n        ]);\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.loading = true;\n\n        this.attrs.discussion.save({\n            featuredFrom: this.from,\n            featuredUntil: this.until,\n        }).then(() => {\n            this.loading = false;\n\n            app.modal.close();\n        }, this.loaded);\n    }\n}\n","import app from 'flarum/forum/app';\nimport EventPost from 'flarum/forum/components/EventPost';\n\nfunction formatDate(date: string | null) {\n    if (!date) {\n        return app.translator.trans('clarkwinkelmann-featured-discussions.forum.post.auto');\n    }\n\n    const d = dayjs(date);\n\n    return d.format('YYYY-MM-DD HH:mm:ss') + ' (' + d.fromNow() + ')';\n}\n\nexport default class FeaturedPost extends EventPost {\n    icon() {\n        return 'fas fa-certificate';\n    }\n\n    descriptionKey() {\n        return 'clarkwinkelmann-featured-discussions.forum.post.' + (this.attrs.post.content().length ? '' : '') + 'scheduled';\n    }\n\n    descriptionData() {\n        const content = this.attrs.post.content();\n\n        return {\n            from: formatDate(content.length > 0 ? content[0] : null),\n            until: formatDate(content.length > 1 ? content[1] : null),\n        };\n    }\n}\n","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Badge from 'flarum/common/components/Badge';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Discussion from 'flarum/common/models/Discussion';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport SchedulePage from './components/SchedulePage';\nimport FeatureModal from './components/FeatureModal';\nimport FeaturedPost from './components/FeaturedPost';\n\napp.initializers.add('clarkwinkelmann-featured-discussions', () => {\n    app.routes.featureSchedule = {\n        path: '/feature-schedule',\n        component: SchedulePage,\n    };\n\n    app.postComponents.featureScheduled = FeaturedPost;\n\n    extend(DiscussionControls, 'moderationControls', function (items: ItemList, discussion: Discussion) {\n        if (!discussion.attribute('canFeature')) {\n            return;\n        }\n\n        items.add('feature', Button.component({\n            icon: 'fas fa-certificate',\n            onclick() {\n                app.modal.show(FeatureModal, {\n                    discussion,\n                });\n            },\n        }, app.translator.trans('clarkwinkelmann-featured-discussions.forum.controls.feature')));\n    });\n\n    extend(Discussion.prototype, 'badges', function (this: Discussion, badges: ItemList) {\n        if (!this.attribute('isFeatured')) {\n            return;\n        }\n\n        badges.add('featured', Badge.component({\n            label: app.translator.trans('clarkwinkelmann-featured-discussions.forum.badge'),\n            icon: 'fas fa-certificate',\n            type: 'featured',\n        }));\n    });\n\n    extend(IndexPage.prototype, 'navItems', function (items: ItemList) {\n        if (app.forum.attribute('showSchedulePage')) {\n            items.add('feature-schedule', LinkButton.component({\n                href: app.route('featureSchedule'),\n                icon: 'fas fa-certificate',\n            }, app.translator.trans('clarkwinkelmann-featured-discussions.forum.nav.schedule')));\n        }\n    });\n});\n"],"sourceRoot":""}